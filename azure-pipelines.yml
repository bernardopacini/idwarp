resources:
  repositories:
  - repository: azure_template
    type: github
    name: bernardopacini/.azure
    endpoint: bernardopacini

variables:
  REPO_NAME: idwarp
  COMPLEX: true
  GCC_CONFIG: config/defaults/config.LINUX_GFORTRAN_OPENMPI.mk
  INTEL_CONFIG: config/defaults/config.LINUX_INTEL_OPENMPI.mk
  INPUT_FILES: true
  STYLE_CHECK: true
  testMatrix:
    c7-gcc-ompi-latest:
      DOCKER_TAG: c7-gcc-ompi-latest
      # CONFIG_FILE: ${{ parameters.GCC_CONFIG }}
    c7-intel-impi-latest:
      DOCKER_TAG: c7-intel-impi-latest
      # CONFIG_FILE: ${{ parameters.INTEL_CONFIG }}
    u20-gcc-ompi-latest:
      DOCKER_TAG: u20-gcc-ompi-latest
      # CONFIG_FILE: ${{ parameters.GCC_CONFIG }}
    u20-gcc-ompi-stable:
      DOCKER_TAG: u20-gcc-ompi-stable
      # CONFIG_FILE: ${{ parameters.GCC_CONFIG }}

pool:
    vmImage: 'ubuntu-latest'

jobs:
  - job:
    # variables:
    # - template: matrix.yaml@azure_template
    # strategy:
    #   matrix: ${{ variables.testMatrix }}
    steps:
    - script: echo ${{ variables.testMatrix }}
    # - template: before-install.yaml@azure_template
  #   parameters: 
  #     REPO_NAME: ${{ variables.REPO_NAME }}
  #     COMPLEX: ${{ variables.COMPLEX }}
  #     GCC_CONFIG: ${{ variables.GCC_CONFIG }}
  #     INTEL_CONFIG: ${{ variables.INTEL_CONFIG }}
  #     INPUT_FILES: ${{ variables.INPUT_FILES }}
  #     STYLE_CHECK: ${{ variables.STYLE_CHECK }}

  # - template: style_check.yaml@azure_template
  #   parameters:
  #     REPO_NAME: ${{ variables.REPO_NAME }}
  #     STYLE_CHECK: ${{ variables.STYLE_CHECK }}

